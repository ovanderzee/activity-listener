!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).activityListener=t()}(this,(function(){"use strict";return function(){let e=!0;const t={passive:!0,capture:!0},n={passive:!0,capture:!1},o={},i={},c=function(e,t,n,o){const i=`on${t}`;i in window?window[e+"EventListener"](t,n,o):i in document?document[e+"EventListener"](t,n,o):"add"===e&&console.warn(`activityListener rejected ${t}-event`)},s=function(e,n){const i=o[e].get(n).procedure,s=o[e].get(n).options;c("remove",e,i,s);const r=o[e].get(n).timer;c("remove",e,r,t),o[e].delete(n),o[e].size||delete o[e]},r=function(){Object.keys(o).forEach((e=>{for(let t of o[e].keys())s(e,t)}))};return{clear:r,destroy:r,erase:s,pause:function(){e=!1},register:function(s,r,u,f=50){const a=function(n,r,u){const a=function(t){!function(e){const t=`${e.type}-${e.timeStamp}`;i[t]&&(clearTimeout(i[t]),delete i[t])}(t),function(t,n,o){if(!e)return;const i=function(){try{t(o)}catch(e){console.error("activityListener caught faulty callback")}};n?setTimeout(i,n):i()}(n,u,t)};o[s]||(o[s]=new Map);const d={procedure:a,options:r};c("add",s,a,r),!1===r.capture&&(d.timer=function(e,n,o){const s=function(e){const t=`${e.type}-${e.timeStamp}`,c=setTimeout((function(){i[t]&&n(e)}),o+25);i[t]=c};return c("add",e,s,t),s}(s,a,f)),o[s].set(n,d)};r&&a(r,t,0),u&&a(u,n,f)},resume:function(){e=!0}}}()}));
//# sourceMappingURL=activityListener.js.map
