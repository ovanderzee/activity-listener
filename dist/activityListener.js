!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).activityListener=t()}(this,(function(){"use strict";return function(){let e=!0;const t={passive:!0,capture:!0},n={passive:!0,capture:!1},o={},i={},c=function(e,t,n,o){const i=`on${t}`;i in window?window[e+"EventListener"](t,n,o):i in document?document[e+"EventListener"](t,n,o):"add"===e&&console.warn(`activityListener rejected ${t}-event`)},r=function(e,n){const i=o[e].get(n).procedure,r=o[e].get(n).options;c("remove",e,i,r);const s=o[e].get(n).timer;c("remove",e,s,t),o[e].delete(n),o[e].size||delete o[e]},s=function(){Object.keys(o).forEach((e=>{for(let t of o[e].keys())r(e,t)}))};return{clear:s,destroy:s,erase:r,pause:function(){e=!1},register:function(s,u,f,a=50){const d=function(n,r,u){const f=function(t){!function(e){const t=`${e.type}-${e.timeStamp}`;i[t]&&(clearTimeout(i[t]),delete i[t])}(t),function(t,n,o){if(!e)return;const i=function(){try{t(o)}catch(e){console.error("activityListener caught faulty callback")}};n?setTimeout(i,n):i()}(n,u,t)};o[s]||(o[s]=new Map);const d={procedure:f,options:r};c("add",s,f,r),!1===r.capture&&(d.timer=function(e,n,o){const r=function(e){const t=`${e.type}-${e.timeStamp}`,c=setTimeout((function(){i[t]&&n(e)}),o+25);i[t]=c};return c("add",e,r,t),r}(s,f,a)),o[s].set(n,d)};return u&&d(u,t,0),f&&d(f,n,a),function(){u&&r(s,u),f&&r(s,f)}},resume:function(){e=!0}}}()}));
//# sourceMappingURL=activityListener.js.map
